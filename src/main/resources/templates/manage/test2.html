<!DOCTYPE html>
<html xmlns:style="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Build CRUD DataGrid with jQuery EasyUI - jQuery EasyUI Demo</title>
    <link rel="stylesheet" type="text/css" href="https://www.jeasyui.com/easyui/themes/default/easyui.css">
    <link rel="stylesheet" type="text/css" href="https://www.jeasyui.com/easyui/themes/icon.css">
    <link rel="stylesheet" type="text/css" href="https://www.jeasyui.com/easyui/demo/demo.css">
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="https://www.jeasyui.com/easyui/jquery.easyui.min.js"></script>
    <script type="text/javascript" src="https://www.jeasyui.com/easyui/jquery.edatagrid.js"></script>
</head>
<body class="easyui-layout" border="false">
<div class="easyui-tabs"  fit="true"
     style="width: 300px;height: 300px">
    <div title="用户控制中心" >
        <p>双击开始编辑</p>
        <table id="dg" title="用户"
               toolbar="#toolbar" pagination="true" idField="id"
               rownumbers="true" fitColumns="flase" singleSelect="true"
               fit="true"
               pageSize=10 pageList="[10, 20, 30, 40]"
        >
            <thead>
            <tr>
                <th field="id" width="50" sortable="true" ditor="{type:'validatebox',options:{required:true}}">编号</th>
                <th field="username" width="50" editor="{type:'validatebox',options:{required:true}}">用户名</th>
                <th field="password" width="50" editor="{type:'validatebox',options:{required:true}}">密码</th>
                <th field="gender" width="50" editor="{type:'validatebox',options:{required:true}}">性别</th>
            </tr>
            </thead>
        </table>
        <div id="toolbar">
            <span>用户ID:</span>
            <input id="itemid" style="line-height:26px;border:1px solid #ccc">
            <a href="#" class="easyui-linkbutton" plain="true" onclick="doSearch()">搜索</a>
            <br>
            <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-add" plain="true" onclick="javascript:$('#dg').edatagrid('addRow')">新增用户</a>
            <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-remove" plain="true" onclick="javascript:$('#dg').edatagrid('destroyRow')">删除用户</a>
            <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-save" plain="true" onclick="javascript:$('#dg').edatagrid('saveRow')">保存用户</a>
            <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-undo" plain="true" onclick="javascript:$('#dg').edatagrid('cancelRow')">取消</a>
        </div>
    </div>
    <div title="商品控制中心" >
        <p>双击开始编辑</p>
        <table id="dg2" toolbar="#toolbar2">
        </table>
        <div id="toolbar2">
            <span>商品ID:</span>
            <input id="itemid2" style="line-height:26px;border:1px solid #ccc">
            <a href="#" class="easyui-linkbutton" plain="true" onclick="doSearch()">搜索</a>
            <br>
            <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-add" plain="true" onclick="javascript:$('#dg').edatagrid('addRow')">新增商品</a>
            <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-remove" plain="true" onclick="javascript:$('#dg').edatagrid('destroyRow')">删除商品</a>
            <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-save" plain="true" onclick="javascript:$('#dg').edatagrid('saveRow')">保存商品</a>
            <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-undo" plain="true" onclick="javascript:$('#dg').edatagrid('cancelRow')">取消</a>
        </div>
    </div>
    <div title="订单控制中心" >
        <p>双击开始编辑</p>
        <table id="dg3" toolbar="#toolbar3">
        </table>
        <div id="toolbar3">
            <span>订单ID:</span>
            <input id="itemid3" style="line-height:26px;border:1px solid #ccc">
            <a href="#" class="easyui-linkbutton" plain="true" onclick="doSearch()">搜索</a>
            <br>
            <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-add" plain="true" onclick="javascript:$('#dg').edatagrid('addRow')">新增商品</a>
            <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-remove" plain="true" onclick="javascript:$('#dg').edatagrid('destroyRow')">删除商品</a>
            <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-save" plain="true" onclick="javascript:$('#dg').edatagrid('saveRow')">保存商品</a>
            <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-undo" plain="true" onclick="javascript:$('#dg').edatagrid('cancelRow')">取消</a>
        </div>
    </div>
</div>




<script type="text/javascript">

    function doSearch(){
        $('#dg').datagrid('load',{
            itemid: $('#itemid').val(),
        });
    }
    $(function(){
        $('#dg').edatagrid({
            url: '/user/selectAll',
            saveUrl: '/user/insert',
            updateUrl: '/user/update',
            destroyUrl: '/user/delete/'
        });
        $('#dg2').edatagrid({
            url: '/goods/queryAll',
            saveUrl: '/goods/insert',
            updateUrl: '/goods/update',
            destroyUrl: '/goods/delete/'
        });
        $('#dg2').datagrid({
            iconCls: 'icon-save',
            pagination: true,
            pageSize: 10,
            pageList: [10, 20, 30, 40],
            fit: true,
            fitColumns: false,
            nowarp: false,
            border: false,
            idField: 'id',
            /* sortName:'id',
          sortOrder: 'desc',*/
            columns: [[{
                title: '编号',
                field: 'pid',
                width: 100
                /*sortable:true*/
            }, {
                title: '价格',
                field: 'price',
                width: 100

            }, {
                title: '商品名',
                field: 'name',
                width: 100

            }, {
                title: '商品描述',
                field: 'desc',
                width: 200
            }, {
                title: 'cid',
                field: 'cid',
                width: 100

            }, {
                title: 'path',
                field: 'path',
                width: 100

            }, {
                title: '库存',
                field: 'stock',
                width: 100
            }]]
        });
        $(function () {
            $('#dg3').datagrid({
                title: '订单管理',
                iconCls: 'icon-save',
                pagination: true,
                pageSize: 10,
                pageList: [10, 20, 30, 40],
                fit: true,
                fitColumns: false,
                nowarp: false,
                border: false,
                idField: 'id',
                /* sortName:'id',
              sortOrder: 'desc',*/
                columns: [[{
                    title: '订单编号',
                    field: 'oid',
                    width: 100
                    /*sortable:true*/
                }, {
                    title: '用户名',
                    field: 'username',
                    width: 100

                }, {
                    title: '商品ID',
                    field: 'user_id',
                    width: 100
                }, {
                    title: '商品数量',
                    field: 'goodscount',
                    width: 100

                }, {
                    title: '总价',
                    field: 'totalprice',
                    width: 100

                }, {
                    title: '地址',
                    field: 'addres',
                    width: 100

                }, {
                    title: '订单状态',
                    field: 'status',
                    width: 100

                }]]
            });
        });
        $('#dg3').edatagrid({
            url: '/order/queryAll',
            saveUrl: '/goods/createOrder',
            updateUrl: '/goods/update',
            destroyUrl: '/goods/deleteByOid/'
        });
    });
    function searchById() {
        $('#dg').datagrid('load', {
            username: $('#manage_user_searchForm').find('[name=username]').val(),
        });
    }
</script>
</body>
</html>
